# Демонстратор ИИ-агента для оценки ответов студентов 

Проект представляет собой демонстрационный прототип ИИ-агента. Агент задает студенту открытые вопросы по теме SRE, принимает свободные ответы и оценивает их с использованием RAG-подсистемы, эмбеддингов и модели GigaChat.

## Общая идея

Система состоит из следующих компонентов:

- база знаний по SRE (теория и вопросы);
- механизм выбора случайного вопроса;
- подсистема Retrieval-Augmented Generation (RAG) для поиска релевантного контекста;
- модель GigaChat, формирующая JSON-оценку ответа студента;
- сервер FastAPI, обеспечивающий API-доступ и демонстрацию работы.

Цель проекта — автоматическая проверка и анализ открытых ответов студентов.

## Установка и запуск

### 1. Установка зависимостей

Необходимо установить пакеты: LangChain, GigaChat, FAISS, FastAPI, uvicorn, HuggingFace Embeddings.  

### 2. Подготовка окружения

- Указать путь к директории проекта.  
- Подключить Google Drive, если используется Google Colab.  
- Разместить в директории файлы теории и вопросы.

### 3. Авторизация API

Для доступа к GigaChat требуется ключ `SBER_AUTH`.  

### 4. Инициализация проекта

После запуска происходит:

- загрузка лекций и вопросов;
- разбиение документов на фрагменты;
- построение эмбеддингов;
- создание векторного хранилища;
- инициализация клиента GigaChat;
- построение RAG-цепочки для поиска контекста.

### 5. Запуск FastAPI-сервера

Сервер запускается с помощью uvicorn и становится доступным по адресу вида  
`http://0.0.0.0:PORT`.


## Возможности демонстрации

### Получение случайного вопроса

Эндпоинт возвращает случайный вопрос из списка загруженных.  
Используется для демонстраций или интерактивных сессий.

### Оценка ответа студента

Эндпоинт принимает вопрос и текст ответа и возвращает JSON-структуру с:

- `verdict` — верно / частично верно / неверно;  
- `feedback` — подробное объяснение;  
- `relevance` — значение от 0 до 1.

Оценка строится на основе найденных фрагментов лекции (RAG).

### Интерактивный режим

В демонстрационном варианте доступен режим, который:

1. запрашивает вопрос у API;  
2. принимает ввод пользователя;  
3. отправляет ответ на оценку;  
4. выводит результат анализа.

### Работа подсистемы RAG

При анализе ответов извлекаются релевантные фрагменты теоретического материала, что повышает корректность оценки и снижает риск галлюцинаций.

## Примеры оценки ответов студента

Ниже приведены три примера того, как ИИ-агент задает вопросы и оценивает ответы студента: корректный ответ, частично верный и неверный.

---

### Пример 1: Верный ответ

**Вопрос:** Как выбрать компромисс между Consistency, Availability и Partition tolerance?

**Ответ студента:**  
В распределенных системах выбор между согласованностью (C), доступностью (A) и устойчивостью к разделению (P) зависит от бизнес-приоритетов: если точность данных критична (банковские операции), жертвуют доступностью (CP); если система должна быть всегда онлайн (соцсети), допускают временную несогласованность (AP); а в идеальных сетевых условиях можно выбрать CA, но в реальных распределенных системах всегда приходится жертвовать либо C, либо A при сетевых разделениях. Ключевой компромисс — определить, что важнее: точность данных или бесперебойная работа.

**Ответ модели (JSON):**
```json
{
  "verdict": "верно",
  "feedback": "Студент правильно понял принцип выбора компромисса между свойствами CAP согласно представленному контексту. Его рассуждения соответствуют изложенным рекомендациям: важность точности данных против доступности системы в зависимости от типа приложения.",
  "relevance": 1.0
}
```

---

### Пример 2: Неверный ответ

**Вопрос:** Назовите основные типы метрик и их назначение.

**Ответ студента:**  
какие-то метрики

**Ответ модели (JSON):**
```json
{
  "verdict": "неверно",
  "feedback": "Студент не привел ни одного типа метрик и не указал их назначения.",
  "relevance": 0.0
}
```

---

### Пример 3: Частично верный ответ

**Вопрос:** Как обеспечивается быстрая реакция на инциденты?

**Ответ студента:**  
мониторингом системы

**Ответ модели (JSON):**
```json
{
  "verdict": "частично верно",
  "feedback": "Мониторинг действительно является важным элементом быстрой реакции на инциденты, однако сам по себе он недостаточен. В контексте указано, что помимо мониторинга важна правильная организация процесса алертирования, распределение нагрузки между специалистами через систему дежурства, продуманная схема коммуникации и устранение технических долгов. Ответ отражает лишь один аспект быстрого реагирования.",
  "relevance": 0.5
}
```


